models:
    trips:
        table: trips
        schema: public
        time_dimension: pickup_datetime
        description: >
            Yellow taxi trip records. Each row is a single passenger trip with
            pickup/dropoff locations, fare breakdown, and payment details.
        dimensions:
            vendor_id:
                column: vendor_id
                description: Technology provider (1 = Creative Mobile, 2 = VeriFone)
            payment_type:
                column: payment_type
                description: 'Payment method: 1=Credit card, 2=Cash, 3=No charge, 4=Dispute, 5=Voided'
            ratecode_id:
                column: ratecode_id
                description: 'Fare rate: 1=Standard, 2=JFK flat rate, 3=Newark, 4=Nassau/Westchester, 5=Negotiated, 6=Group ride'
            pickup_datetime:
                column: pickup_datetime
                description: When the meter was engaged
            dropoff_datetime:
                column: dropoff_datetime
                description: When the meter was disengaged
            passenger_count:
                column: passenger_count
                description: Driver-entered passenger count (may be inaccurate, 0 values are common errors)
            pu_location_id:
                column: pu_location_id
                description: TLC taxi zone where the trip started (joins to zones table)
            do_location_id:
                column: do_location_id
                description: TLC taxi zone where the trip ended (joins to zones table)
            store_and_fwd_flag:
                column: store_and_fwd_flag
                description: 'Y=trip data stored locally before sending (no network), N=sent immediately'
        measures:
            trip_count:
                type: count
                description: Total number of trips
            total_fare:
                column: fare_amount
                type: sum
                description: Sum of base fare (time + distance charge by the meter)
            avg_fare:
                column: fare_amount
                type: avg
                description: Average base fare per trip
            total_tips:
                column: tip_amount
                type: sum
                description: Sum of tips — only reliable for credit card payments, cash tips are not recorded
            avg_tips:
                column: tip_amount
                type: avg
                description: Average tip per trip — biased low because cash tips show as $0
            avg_trip_distance:
                column: trip_distance
                type: avg
                description: Average trip distance in miles — varies significantly by borough and rate code
            total_revenue:
                column: total_amount
                type: sum
                description: Sum of total charged (fare + tips + tolls + surcharges + extras)
            avg_revenue:
                column: total_amount
                type: avg
                description: Average total charge per trip
            total_tolls:
                column: tolls_amount
                type: sum
                description: Sum of all bridge and tunnel tolls
            total_surcharge:
                column: improvement_surcharge
                type: sum
                description: Sum of the $0.30 improvement surcharge assessed on hailed trips
        joins:
            pickup_zone:
                to_model: zones
                foreign_key: pu_location_id
                related_key: locationid
                type: many_to_one
            dropoff_zone:
                to_model: zones
                foreign_key: do_location_id
                related_key: locationid
                type: many_to_one
            payment:
                to_model: payment_types
                foreign_key: payment_type
                related_key: payment_type_id
                type: many_to_one
            rate_code:
                to_model: rate_codes
                foreign_key: ratecode_id
                related_key: rate_code_id
                type: many_to_one

    zones:
        table: zones
        schema: public
        primary_key: locationid
        description: >
            265 NYC TLC taxi zones. Each zone belongs to a borough and a service zone
            (Yellow Zone = Manhattan core, Boro Zone = outer boroughs, Airports).
        dimensions:
            locationid:
                column: locationid
                description: Unique TLC zone identifier (1-265)
            borough:
                column: borough
                description: 'NYC borough: Manhattan, Brooklyn, Queens, Bronx, Staten Island, EWR'
            zone:
                column: zone
                description: Human-readable zone name (e.g. Upper East Side, JFK Airport)
            service_zone:
                column: service_zone
                description: 'TLC service classification: Yellow Zone (Manhattan), Boro Zone (outer boroughs), Airports'
        measures:
            zone_count:
                type: count
                description: Number of zones

    payment_types:
        table: payment_types
        schema: public
        primary_key: payment_type_id
        description: Lookup table mapping payment type codes to descriptions.
        dimensions:
            payment_type_id:
                column: payment_type_id
                description: 'Numeric code: 1=Credit card, 2=Cash, 3=No charge, 4=Dispute, 5=Voided'
            payment_type_name:
                column: payment_type_name
                description: Human-readable payment type name
        measures:
            type_count:
                type: count
                description: Number of payment types

    rate_codes:
        table: rate_codes
        schema: public
        primary_key: rate_code_id
        description: Lookup table mapping rate code IDs to fare rate descriptions.
        dimensions:
            rate_code_id:
                column: rate_code_id
                description: 'Numeric code: 1=Standard, 2=JFK, 3=Newark, 4=Nassau/Westchester, 5=Negotiated, 6=Group'
            rate_code_name:
                column: rate_code_name
                description: Human-readable rate code name
        measures:
            code_count:
                type: count
                description: Number of rate codes
